///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//		Author:	Pablo Ramon Soria
//		Date:	2015-12-01
//
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


#include "EkfImu.h"

//---------------------------------------------------------------------------------------------------------------------
void EkfImu::updateJf(const double _incT) {
	Eigen::Matrix3d I = Eigen::Matrix3d::Identity();
	mJf.block<3, 3>(0, 3) =I*_incT;
	mJf.block<3, 3>(0, 6) =I*_incT*_incT/2;
	mJf.block<3, 3>(3, 6) =I*_incT;
	mJf.block<3, 3>(9, 12) =I*_incT;
}

//---------------------------------------------------------------------------------------------------------------------
void EkfImu::updateHZk() {
	mHZk.block<3,1>(0,0) = mXfk.block<3,1>(6,0);
	mHZk.block<3,1>(3,0) = mXfk.block<3,1>(12,0);
}

//---------------------------------------------------------------------------------------------------------------------
void EkfImu::updateJh() {
	mJh(0,6) = 1;
	mJh(1,7) = 1;
	mJh(2,8) = 1;
	mJh(3,9) = 1;
	mJh(4,10) = 1;
	mJh(5,11) = 1;
}
